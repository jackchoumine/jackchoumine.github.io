import{_ as s,o as n,c as l,a}from"./app.7d629778.js";const d=JSON.parse('{"title":"css 选择器特异性","description":"","frontmatter":{},"headers":[{"level":2,"title":"规则 vs 声明 vs 属性 vs 属性值","slug":"规则-vs-声明-vs-属性-vs-属性值","link":"#规则-vs-声明-vs-属性-vs-属性值","children":[]},{"level":2,"title":"特异性计算","slug":"特异性计算","link":"#特异性计算","children":[{"level":3,"title":"特异性应用规则","slug":"特异性应用规则","link":"#特异性应用规则","children":[]},{"level":3,"title":"慎用行内样式和 !important","slug":"慎用行内样式和-important","link":"#慎用行内样式和-important","children":[]}]},{"level":2,"title":"应该多用类选择器","slug":"应该多用类选择器","link":"#应该多用类选择器","children":[]},{"level":2,"title":"小结","slug":"小结","link":"#小结","children":[]}],"relativePath":"web/css/selector-specificity.md"}'),o={name:"web/css/selector-specificity.md"},p=a(`<h1 id="css-选择器特异性" tabindex="-1">css 选择器特异性 <a class="header-anchor" href="#css-选择器特异性" aria-hidden="true">#</a></h1><p>当有<strong>多个选择器</strong>中有<strong>相同的属性</strong>作用于同一个元素时，浏览器会根据选择器的特异性来决定哪个选择器的<strong>属性值</strong>生效。</p><div class="language-css line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">p</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">my-p</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">background-color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> blue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> red</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">#</span><span style="color:#F78C6C;">my-p</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">background-color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> green</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> yellow</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">box-sizing</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> border-box</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">my-p</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">my-p</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Hello, world!</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>上面的例子中， <code>p.my-p</code> 和 <code>#my-p</code> 选择器都作用于 <code>p</code> 元素，但是 <code>#my-p</code> 的特异性更高，所以 <code>#my-p</code> 中的 <code>color</code> 和 <code>background-color</code> 属性值生效。</p><blockquote><p>在 chrome 开发者工具中，可查看失效的属性值。</p></blockquote><p><img src="https://cdn.jsdelivr.net/npm/zqj-pics/css/shi-xiao-sheng-ming.png" alt="失效的属性值会显示删除线"></p><blockquote><p>在计算样式面板，可查看最后生效的所有样式声明。</p></blockquote><p><img src="https://cdn.jsdelivr.net/npm/zqj-pics/css/ji-suan-yang-shi.png" alt="计算样式"></p><h2 id="规则-vs-声明-vs-属性-vs-属性值" tabindex="-1">规则 vs 声明 vs 属性 vs 属性值 <a class="header-anchor" href="#规则-vs-声明-vs-属性-vs-属性值" aria-hidden="true">#</a></h2><p>很多文章没有明确区分这几个概念，这里先做一个区分：</p><ul><li><strong>规则</strong>：CSS 规则由选择器和声明组成，如 <code>p { color: red; }</code>。</li><li><strong>声明</strong>：CSS 声明由属性和属性值组成，如 <code>color: red;</code>。</li><li><strong>属性</strong>：CSS 属性是 CSS 规则中的一部分，如 <code>color</code>。</li><li><strong>属性值</strong>：CSS 属性值是 CSS 规则中的一部分，如 <code>red</code>。</li></ul><blockquote><p>在 chrome 开发者工具中，可在右键菜单那种复制它们。</p></blockquote><blockquote><p>特异性影响的属于多个规则中的属性值，而不是规则本身。</p></blockquote><h2 id="特异性计算" tabindex="-1">特异性计算 <a class="header-anchor" href="#特异性计算" aria-hidden="true">#</a></h2><p>特异性是一个四元组，如 <code>0, 0, 0, 0</code> ，每个元素的值都是一个非负整数，从左到右依次是:</p><ol><li><strong>行内样式</strong>：行内样式的特异性是 <code>1, 0, 0, 0</code>。</li><li><strong>ID 选择器</strong>：ID 选择器的特异性是 <code>0, 1, 0, 0</code>。</li><li><strong>类选择器、属性选择器、伪类</strong>：类选择器、属性选择器、伪类的特异性是 <code>0, 0, 1, 0</code>。</li><li><strong>元素选择器、伪元素</strong>：元素选择器、伪元素的特异性是 <code>0, 0, 0, 1</code>。</li></ol><blockquote><p>chrome 开发者工具中，鼠标移动到选择器上可以查看特异性，不会显示行内样式的特异性。</p></blockquote><p><img src="https://cdn.jsdelivr.net/npm/zqj-pics/css/chrome-dev-tool-%E7%89%B9%E5%BC%82%E6%80%A7.png" alt="查看特异性"></p><blockquote><p>常见的选择器特异性</p></blockquote><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">             </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">  /</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> a=0 b=0 c=0 d=0 -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> specificity = 0,0,0,0 </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">/</span></span>
<span class="line"><span style="color:#FFCB6B;">li</span><span style="color:#A6ACCD;">            </span><span style="color:#C3E88D;">{}</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">b=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">c=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">d=</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">specificity</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">,0,0,1</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">/</span></span>
<span class="line"><span style="color:#FFCB6B;">li:first-line</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">{}</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">b=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">c=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">d=</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">specificity</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">,0,0,2</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">/</span></span>
<span class="line"><span style="color:#FFCB6B;">ul</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">li</span><span style="color:#A6ACCD;">         </span><span style="color:#C3E88D;">{}</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">b=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">c=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">d=</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">specificity</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">,0,0,2</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">/</span></span>
<span class="line"><span style="color:#FFCB6B;">ul</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ol+li</span><span style="color:#A6ACCD;">      </span><span style="color:#C3E88D;">{}</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">b=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">c=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">d=</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">specificity</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">,0,0,3</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">/</span></span>
<span class="line"><span style="color:#FFCB6B;">h1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">[rel=up]{}</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">b=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">c=</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">d=</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">specificity</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">,0,1,1</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">/</span></span>
<span class="line"><span style="color:#FFCB6B;">ul</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ol</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">li.red</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">{}</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">b=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">c=</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">d=</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">specificity</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">,0,1,3</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">/</span></span>
<span class="line"><span style="color:#FFCB6B;">li.red.level</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">{}</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">b=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">c=</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">d=</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">specificity</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">,0,2,1</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">/</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#x34y         {}  /* a=0 b=1 c=0 d=0 -&gt; specificity = 0,1,0,0 */</span></span>
<span class="line"><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#A6ACCD;">          </span><span style="color:#FFCB6B;">/*</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a=</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">b=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">c=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">d=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">specificity</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;">,0,0,0</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="特异性应用规则" tabindex="-1">特异性应用规则 <a class="header-anchor" href="#特异性应用规则" aria-hidden="true">#</a></h3><ol><li><strong>同类叠加</strong>：<code>.a.b</code> 的特异性是 <code>0, 0, 2, 0</code>，因为有两个类选择器，<code>#a.b</code> 的特异性是 <code>0, 1, 1, 0</code>。</li><li><strong>特异性相同</strong>：后定义的规则会覆盖先定义的规则。</li><li><strong>特异性不同</strong>：特异性高的规则会覆盖特异性低的规则。</li><li><strong>!important</strong>：<code>!important</code> 会覆盖任何规则，但是不推荐使用。</li></ol><blockquote><p>通配选择器( <code>*</code> )、组合选择器( <code>+, &gt;, ~, &#39;&#39;, ||</code> )和一些伪类选择器( <code>:not()</code> 、 <code>:where()</code> 、 <code>:is()</code> ) 不影响特异性。</p></blockquote><h3 id="慎用行内样式和-important" tabindex="-1">慎用行内样式和 <code>!important</code> <a class="header-anchor" href="#慎用行内样式和-important" aria-hidden="true">#</a></h3><blockquote><p>何时应该使用行内样式？</p></blockquote><p>只有覆盖id选择器的时候使用。</p><p>行内样式有三个严重的问题：</p><ol><li><p>不利于维护：行内样式和 HTML 混在一起，不利于维护。</p></li><li><p>优先级高：行内样式的优先级非常高，会覆盖大部分样式，只有<code>!important</code>才能覆盖行内样式。</p></li><li><p>不利于复用：行内样式只能作用于一个元素，不利于复用。</p></li></ol><p>使用 <code>!important</code> 的时候，有引发其他一些问题。</p><blockquote><p>何时应该使用 <code>!important</code> ?</p></blockquote><ol><li><p>只有覆盖行内样式的时候使用。</p></li><li><p>覆盖其他<code>!important</code>的时候使用。</p></li></ol><p>其他情况，都尽可能不用。与其使用 <code>!important</code> ，不如：</p><ol><li><p>使用特异性高的选择器。</p></li><li><p>使用级联特性降低某些规则的优先级。</p></li></ol><blockquote><p>何时不该用 <code>!important</code> ?</p></blockquote><ol><li>在覆盖全站某些样式时使用，比如在黑暗模式下覆盖某些样式。</li></ol><p>其他情况，都不要使用。</p><h2 id="应该多用类选择器" tabindex="-1">应该多用类选择器 <a class="header-anchor" href="#应该多用类选择器" aria-hidden="true">#</a></h2><p>类选择的特异性较低，容易被覆盖，且能够复用。</p><p>ID 选择器的特异性很高，难以被覆盖，无法复用。</p><blockquote><p>慎用行内样式、ID 选择器和 <code>!important</code> 。</p></blockquote><h2 id="小结" tabindex="-1">小结 <a class="header-anchor" href="#小结" aria-hidden="true">#</a></h2><ul><li>特异性是一个四元组，每个元素的值都是一个非负整数，从左到右依次是：行内样式、ID 选择器、类选择器、元素选择器。</li><li>特异性高的规则会覆盖特异性低的规则。</li><li>通配选择器、组合选择器和一些伪类选择器不影响特异性。</li><li>慎用行内样式、ID 选择器和 <code>!important</code> 。</li><li>应该多用类选择器。</li></ul>`,43),e=[p];function c(t,r,C,y,D,i){return n(),l("div",null,e)}const F=s(o,[["render",c]]);export{d as __pageData,F as default};

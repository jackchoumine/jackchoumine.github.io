import{_ as s,o as n,c as a,a as l}from"./app.aeba0d34.js";const C=JSON.parse('{"title":"再学跨域（三） -- HTML 标签上的跨域","description":"","frontmatter":{},"headers":[{"level":2,"title":"html 标签加载第三方资源时的安全问题","slug":"html-标签加载第三方资源时的安全问题","link":"#html-标签加载第三方资源时的安全问题","children":[]},{"level":2,"title":"服务器不支持跨域，加上 crossorigin 会怎样？","slug":"服务器不支持跨域-加上-crossorigin-会怎样","link":"#服务器不支持跨域-加上-crossorigin-会怎样","children":[]},{"level":2,"title":"跨域的资源不启用跨域请求时，对 JS 读写的限制是什么？","slug":"跨域的资源不启用跨域请求时-对-js-读写的限制是什么","link":"#跨域的资源不启用跨域请求时-对-js-读写的限制是什么","children":[{"level":3,"title":"img 跨域读取限制","slug":"img-跨域读取限制","link":"#img-跨域读取限制","children":[]},{"level":3,"title":"script 跨域读取限制","slug":"script-跨域读取限制","link":"#script-跨域读取限制","children":[]}]},{"level":2,"title":"更多阅读","slug":"更多阅读","link":"#更多阅读","children":[]},{"level":2,"title":"小结","slug":"小结","link":"#小结","children":[]}],"relativePath":"web/js/再学跨域2-html标签上的跨域.md"}'),o={name:"web/js/再学跨域2-html标签上的跨域.md"},p=l(`<h1 id="再学跨域-三-html-标签上的跨域" tabindex="-1">再学跨域（三） -- HTML 标签上的跨域 <a class="header-anchor" href="#再学跨域-三-html-标签上的跨域" aria-hidden="true">#</a></h1><blockquote><p>关于博主：前端程序员，最近专注于 webGis 开发。加微信：MasonChou123，进技术交流群。</p></blockquote><p>前两篇文章我们讲了同源策略和和 CORS，这篇文章我们来讲一下 HTML 标签上的跨域。</p><p>默认情况下，一些 html 标签不受同源策略的限制，比如 <code>&lt;img&gt;</code> 、 <code>&lt;link&gt;</code> 、 <code>&lt;script&gt;</code> 、 <code>&lt;iframe&gt;</code> 、 <code>&lt;audio&gt;</code> 、 <code>&lt;video&gt;</code> 等标签。</p><p>当它们跨域请求资源时，会受到一些限制，比如不能<strong>读取</strong>资源的内容，不能<strong>读取</strong>资源的错误信息等。</p><p>crossorigin 属性在 <code>&lt;audio&gt;</code> 、 <code>&lt;img&gt;</code> 、 <code>&lt;link&gt;</code> 、 <code>&lt;script&gt;</code> 、 <code>iframe</code> 和 <code>&lt;video&gt;</code> 元素中有效，它们提供对 CORS 的支持， crossorigin 定义该元素如何处理跨源请求，从而实现对该元素获取数据的 CORS 请求的配置。</p><p>crossorigin 属性有三个值：</p><ul><li>anonymous：不发送用户凭据（如 cookie 或 HTTP 认证信息）。</li><li>空字符串：不发送任何凭据。</li><li>use-credentials：发送用户凭据（如 cookie 或 HTTP 认证信息）。</li></ul><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">img</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://example.com/image.png</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">&lt;!-- 默认值，不启用跨域 即请求头中不含 origin --&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- 启用用跨域，即请求头中含有 origin --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">img</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://example.com/image.png</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">crossorigin</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">anonymous</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">&lt;!-- 不发送用户凭据 --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">img</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://example.com/image.png</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">crossorigin</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">&lt;!-- 不发送任何凭据 --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">img</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://example.com/image.png</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">crossorigin</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">use-credentials</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">&lt;!-- 发送用户凭据 --&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="html-标签加载第三方资源时的安全问题" tabindex="-1">html 标签加载第三方资源时的安全问题 <a class="header-anchor" href="#html-标签加载第三方资源时的安全问题" aria-hidden="true">#</a></h2><p>加载第三方资源不受同源策略的限制，但是会有一些安全问题。</p><p>比如第三方脚本能访问本网站的错误信息和 cookie，这样就会泄露一些敏感信息。</p><p>为了应对这些问题，我们可以使用 crossorigin 属性来限制第三方资源的访问。</p><p>在 img 标签上使用 crossorigin 属性，允许来自第三方的图片与 canvas 一起使用。</p><p><a href="https://stackoverflow.com/a/18336863/6524962" target="_blank" rel="noreferrer">purpose-of-the-crossorigin-attribute -- 问题回答</a></p><h2 id="服务器不支持跨域-加上-crossorigin-会怎样" tabindex="-1">服务器不支持跨域，加上 crossorigin 会怎样？ <a class="header-anchor" href="#服务器不支持跨域-加上-crossorigin-会怎样" aria-hidden="true">#</a></h2><p>会报错跨域错误。</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">img</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://www.baidu.com/img/bd_logo1.png</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">alt</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">百度logo，不支持跨域</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">crossorigin</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">anonymous</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">width</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">100</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">height</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">100</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>百度的图片服务器不支持跨域，所以会报错：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">has</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">been</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">blocked</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">CORS</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">policy:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">No</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Access-Control-Allow-Origin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">header</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">present</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">on</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requested</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">resource.</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="跨域的资源不启用跨域请求时-对-js-读写的限制是什么" tabindex="-1">跨域的资源不启用跨域请求时，对 JS 读写的限制是什么？ <a class="header-anchor" href="#跨域的资源不启用跨域请求时-对-js-读写的限制是什么" aria-hidden="true">#</a></h2><table><thead><tr><th>元素</th><th>限制</th></tr></thead><tbody><tr><td>img、audio、video</td><td>当资源被放置在 <code>&lt;canvas&gt;</code> 中时，元素会标记为被污染的。</td></tr><tr><td>script</td><td>对错误日志 window.onerror 的访问将会被限制。</td></tr></tbody></table><h3 id="img-跨域读取限制" tabindex="-1">img 跨域读取限制 <a class="header-anchor" href="#img-跨域读取限制" aria-hidden="true">#</a></h3><p>同源的图片，对写入 canvas 和读取操作是没有限制的。跨域的图片，对 js 读取是有限制的。</p><p>在&quot;被污染&quot;的 canvas 中调用以下方法将会抛出安全错误：</p><ul><li>在 canvas 的上下文上调用 getImageData()；</li><li>在 <code>&lt;canvas&gt;</code> 元素本身调用 toBlob()、toDataURL() 或 captureStream()。</li></ul><p>主要关注跨域的情况，对于同源的图片，没有限制。</p><table><thead><tr><th>服务器支持跨域</th><th>crossorigin 属性</th><th>读取</th><th>写入</th></tr></thead><tbody><tr><td>否</td><td>不设置</td><td>不报错</td><td>报错</td></tr><tr><td>否</td><td>设置</td><td>报错</td><td>报错</td></tr><tr><td>是</td><td>不设置</td><td>报错</td><td>不报错</td></tr><tr><td>是</td><td>设置</td><td>不报错</td><td>不报错</td></tr></tbody></table><p>图片跨之后为了不报错，解决方案是：</p><blockquote><p>服务器开启图片跨域访问和在 img 标签上加上 crossorigin 属性。</p></blockquote><p>以上情况可通过下面的函数来验证：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * @Author: ZhouQiJun</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * @Description: 关于博主，前端程序员，最近专注于 webGis 开发</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * @加微信: MasonChou123，进技术交流群</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">draw</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">src</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">crossOrigin</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 页面上的 canvas 元素</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">canvas</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">canvas</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">context</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">canvas</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getContext</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2d</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">img</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Image</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">crossOrigin</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">undefined</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">img</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crossOrigin</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">crossOrigin</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">img</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">src</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">src</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">img</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">load</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">canvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">img</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">canvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">height</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">img</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">height</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">canvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerText</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">加载成功</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">drawImage</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">img</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">40</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">40</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">img</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">img</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setItem</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">img</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">canvas</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toDataURL</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">image/png</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="script-跨域读取限制" tabindex="-1">script 跨域读取限制 <a class="header-anchor" href="#script-跨域读取限制" aria-hidden="true">#</a></h3><p>script 是否开启跨域访问，主要影响的加载脚本的页面是否有权限访问<strong>跨域脚本</strong>的错误信息。</p><table><thead><tr><th>服务器支持跨域</th><th>crossorigin 属性</th><th>能否读取跨域脚本的错误信息</th></tr></thead><tbody><tr><td>否</td><td>不设置</td><td>不能，只有 <code>Script error</code></td></tr><tr><td>否</td><td>设置</td><td>报跨域错误</td></tr><tr><td>是</td><td>不设置</td><td>不能，只有 <code>Script error</code></td></tr><tr><td>是</td><td>设置</td><td>能读取具体信息</td></tr></tbody></table><blockquote><p>这个属性的使用场景：</p></blockquote><p>当产品以 JS SDK 的形式通过 CDN 提供给第三方使用时，为了不让第三方看到错误信息，在服务器就不开启跨域。</p><p>这是脚本的提供方控制的，而不是使用方控制的，使用方可通过 <code>SameSite=Strict</code> 或者 <code>SameSite=Lax</code> 来控制 cookie 不被跨域脚本读取。</p><p>crossorigin 是无法限制跨域的脚本获取本网站的错误信息的，也是无法限制使用脚本的人进行 debug 的。</p><h2 id="更多阅读" tabindex="-1">更多阅读 <a class="header-anchor" href="#更多阅读" aria-hidden="true">#</a></h2><p><a href="https://pengfeixc.com/blogs/javascript/cors-problem" target="_blank" rel="noreferrer">谷歌浏览器缓存导致跨域，造成 tainted canvas 错误</a></p><p><a href="https://segmentfault.com/q/1010000008648867" target="_blank" rel="noreferrer"><img>加上 crossOrigin=&quot;anonymous&quot;之后导致图片无法显示</a></p><p><a href="https://stackoverflow.com/questions/25898035/html-crossorigin-attribute-for-img-tag" target="_blank" rel="noreferrer">HTML crossorigin attribute for img tag</a></p><p><a href="https://blog.huli.tw/2021/02/19/cors-guide-6/" target="_blank" rel="noreferrer">CORS 完全手册（六）：总结、后记与遗珠</a></p><h2 id="小结" tabindex="-1">小结 <a class="header-anchor" href="#小结" aria-hidden="true">#</a></h2><ul><li>html 标签不受同源策略的限制，但是会有一些安全问题。</li><li>crossorigin 属性在 <code>&lt;audio&gt;</code> 、 <code>&lt;img&gt;</code> 、 <code>&lt;link&gt;</code> 、 <code>&lt;script&gt;</code> 、 <code>iframe</code> 和 <code>&lt;video&gt;</code> 元素中有效，它们提供对 CORS 的支持， crossorigin 定义该元素如何处理跨源请求，从而实现对该元素获取数据的 CORS 请求的配置。</li><li>服务器不支持跨域，加上 crossorigin 会报错跨域错误。</li><li>跨域的资源不启用跨域请求时，对 JS 读写的限制是：img、audio、video 元素在被放置在 <code>&lt;canvas&gt;</code> 中时，元素会标记为被污染的；script 对错误日志 window.onerror 的访问将会被限制。</li><li>图片跨域后，为了不报错，解决方案是：服务器开启图片跨域访问和在 img 标签上加上 crossorigin 属性。</li><li>script 是否开启跨域访问，主要影响的加载脚本的页面是否有权限访问<strong>跨域脚本</strong>的错误信息。</li><li>crossorigin 是无法限制跨域的脚本获取本网站的错误信息的，也无法限制使用脚本的人进行 debug。</li></ul><blockquote><p>关于博主：前端程序员，最近专注于 webGis 开发。加微信：MasonChou123，进技术交流群。</p></blockquote>`,47),t=[p];function e(r,c,i,y,D,F){return n(),a("div",null,t)}const g=s(o,[["render",e]]);export{C as __pageData,g as default};

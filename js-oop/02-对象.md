# 对象

基于类的语言根据类的定义锁定对象，JavaScript 没有这种限制。

## 定义属性

```js
var person = {
  name: 'xiaoMing',
}
person.sayHi = function () {
  console.log('sayHi')
}
const p = new Object()
p.name = '小明'
```

可定义对象时添加，也可以等到后面添加。

### 属性检测

|                    | 自有属性    | 原型属性    | 可枚举属性   | 说明                                                  |
| ------------------ | ----------- | ----------- | ------------ | ----------------------------------------------------- |
| in                 | true        | true        | 不关心       | 只要找到就返回 true                                   |
| obj.hasOwnProperty | true        | false       | 不关心       | 属于 Object.prototype 的方法，可能被覆盖              |
| Object.hasOwn      | true        | false       | 不关心       | ES2022 新增                                           |
| for...in           | true 可枚举 | true 可枚举 | 只处理可枚举 | 常需搭配 hasOwnProperty 或 Object.hasOwn 过滤原型属性 |
| Object.keys        | true        | false       | 只处理可枚举 | 不含不可枚举和 Symbol 属性                            |

### 删除属性

```js
delete obj.key // 删除属性
```

### 禁止修改对象

有时候需要禁止对对象进行扩展。

| 函数                     | 添加属性 | 删除属性 | 修改值 | 配置属性（如 configurable、writable） | 判断方法            |
| ------------------------ | -------- | -------- | ------ | ------------------------------------- | ------------------- |
| Object.preventExtensions | ❌       | ✅       | ✅     | ✅                                    | Object.isExtensible |
| Object.seal              | ❌       | ❌       | ✅     | ❌ （configurable: false）            | Object.isSealed     |
| Object.freeze            | ❌       | ❌       | ❌     | ❌ （writable: false）                | Object.isFrozen     |

freeze 防止修改最彻底，常用于声明一个不可变的对象。

> 浅冻结：freeze 不会递归冻结嵌套对象，需手动深度冻结。

```js
function deepFreeze(obj) {
  Object.freeze(obj)
  for (const key in obj) {
    if (typeof obj[key] === 'object') deepFreeze(obj[key])
  }
}
```

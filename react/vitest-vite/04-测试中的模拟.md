# 测试中的模拟

代码会依赖一些外部环境，比如 http 接口、npm 模块、数据库等，集成这些环境往往会使得单元测试变复杂，真实环境也许是缓慢和脆弱的，比如真实环境要求定时器的间隔为 20 分钟，单元测试不可能等待 20 分钟，这些不稳定不可靠的**外部依赖**，在测试代码中需要给外部依赖创建一个假的替身，这就是所谓 mocking。

通过模拟，单元测试更加控件、稳定和快速。

vitest 提供了强大的 mocking 功能，支持对模块、函数、定时器、浏览器等的模拟，下面我们来看看如何使用 vitest 的 mocking 功能。

这一节先学习模拟函数、模块、浏览器和环境变量等，定时器和 http 接口的模拟会在后后续两面两节讲解。

## 模拟函数

## 模拟模块

## 模拟浏览器

## 模拟环境变量

## 小结

##

https://blog.logrocket.com/advanced-guide-vitest-testing-mocking/

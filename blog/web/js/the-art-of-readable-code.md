# 编写可读性代码的艺术

最近阅读了《编写可读代码的艺术》一书，感觉很有收获，现在结合自己的理解再来总结编写可读性代码的技巧。

学会该书的大部分技巧并付诸实践，不能保证保证你写出完美的代码，但是能保证你写出能读的代码，保证你的**码德**下限。

可读性 = 可测试性 = 设计良好 = 可维护 = 代码质量 = ...，衡量代码的各种指标，都是正相关的，开发程序的大部分时间是在阅读代码（自己的和他人的），所以保证了可读性，其他指标也不会差。

## 衡量代码的可读性

大部分程序员，全靠自觉、灵感和经验编写代码，往往很难一步到位写出可读性高的代码。

我看过一些前端组长、前端架构写的代码，简直惨不忍睹，让人有骂娘的冲动。

比如这种：

![](https://cdn.jsdelivr.net/gh/jackchoumine/jack-picture@master/bad-render-chart.png)

还有行宽过大，编辑器都出现滚动条了，也会让人不想读。

不可读的代码往往都会有这样或那样的问题。

> 软件的成本由开发成本和维护成本组成，而往往维护成本要远高于开发成本，维护成本主要花在理解代码和修改代码上，可读性高、设计良好的代码可大大降理解和修改代码的成本。

可见代码的可读性至关重要。

如何衡量代码的可读性呢？

> 代码可读性和代码被他人理解的时间成正比，即他人**理解**代码的时间越少，可读性越高。

如何定义他人？根据我的经验，高年级本科生或者研究生或者工作2年内的程序员。

如何定义理解？修改代码后，没有引入新的 bug，可视为理解了。

当可读性和其他约束条件，比如性能、代码行数冲突时，如何取舍？

> 大部分情况，**可读性优先**，那些可能会经常被他人阅读、改动的代码，可读性再怎么强调都不为过。

## 命名的技巧

好的代码，从好的命名开始。

### 把信息放在名字里

1. 选择专业的词汇**清晰和精确**。比如`fetchData`比`getData`好；
2. 避免宽泛的名字，除非有特别的理由

避免使用 `tmp` 、 `retval` 这类宽泛的名字。好的名字应该描述变量的目的或者它承载的值， `tmp_file` 比如 `tmp` 好。

3. 使用具体的名字，避免抽象的名字

4. 把重要的信息附加到名字上

常见的可以附加的信息：

① 单位 

② 格式

③ 

5. 变量作用域大小决定名字长短

谨慎使用缩略词、自己造词。

6. 使用格式表示含义

遵循编程语言或者团队的约定，且保持一致。

比如 js 中，构造函数使用大坨峰(Person)，普通函数使用小驼峰(person)。

### 不要使用有歧义的名字

## 参考

![](https://pegasuswang.readthedocs.io/zh/latest/code/%E7%BC%96%E5%86%99%E5%8F%AF%E8%AF%BB%E4%BB%A3%E7%A0%81%E7%9A%84%E8%89%BA%E6%9C%AF/)

![](https://pdai.tech/md/about/book/book-read-code-art.html#%E3%80%8A%E7%BC%96%E5%86%99%E5%8F%AF%E8%AF%BB%E4%BB%A3%E7%A0%81%E7%9A%84%E8%89%BA%E6%9C%AF%E3%80%8B)

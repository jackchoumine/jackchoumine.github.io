# 地理数据格式

<!-- TODO 待总结 -->

要在地图上显示点线面等地理要素或者空间实体，就要使用某种数据把这些实体的空间位置和属性信息存储起来，这种数据就是地理数据。无论是矢量数据还是栅格数据，都有众多的数据格式。

所有 GIS 基础软件都提供了常用地理数据的转换功能。

[Mapshaper](https://mapshaper.org/) 网站提供了常用矢量数据类型的在线转换功能，支持 Shapefile、GeoJSON、TopoJSON、DBF 和 CSV 等类型数据的转换，转换后的格式包括 Shapefile、GeoJSON、TopoJSON、JSON、CSV、SVG 等。

[geojson.io](https://geojson.io/) 网站提供了 GeoJSON、TopoJSON、GTFS、KML、CSV、GPX、OSM XML 等类型数据的地图在线预览、绘制、编辑、查看、共享等功能，支持将数据存储为 GeoJSON、TopoJSON、CSV、KML、WKT、Shapefile 等类型。

> 使用 [GeoJSON.IO for VSCode](https://marketplace.visualstudio.com/items?itemName=swallow.geojson-io-for-vscode) 插件可以在 VSCode 中编辑 GeoJSON 更加丝滑。

## 常用的地理数据格式

### GeoJSON

GeoJSON 是 JSON 对象的一种形式化语法，是一种可以对各种地理数据结构进行编码的地理空间信息数据交换格式，是 JSON 的子集，所有的 GeoJSON 对象都是 JSON 对象。GeoJSON 文件的扩展名为 `.geojson` ，当然，也可以是 `.json` 。

GeoJSON 支持的几何类型包括点（Point）、线（LineString）、面（Polygon）、多点（MultiPoint）、多线（MultiLineString）和多面（MultiPolygon）等，几何类型的数据及其属性组成了 Feature 对象，多个 Feature 对象组成了 FeatureCollection 对象。

一个简单的 GeoJSON 对象示例：

```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [102.0, 0.5]
      },
      "properties": {
        "name": "xxx"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [102.0, 0.0],
          [103.0, 1.0]
        ]
      },
      "properties": {
        "name": "xxx"
      }
    }
  ]
}
```

“type”属性值是“FeatureCollection”，也就是说该对象是一个 FeatureCollection 对象；紧跟着的“features”属性值是一个数组，由三个对象组成，这三个对象的“type”属性值都是“Feature”。也就是说这三个对象都是 Feature 对象，其名称可以从“properties”属性中的“name”属性得到。三个 Feature 对象的几何类型可以从“geometry”属性对象中的“type”属性得到，分别是“Point”（点）、“LineString”（线）和“Polygon”（面）。从“geometry”属性中的“coordinates”属性可以看出：

**点要素的几何形态由一个坐标对组成**，经度在前、纬度在后；

**线要素的几何形态则由两个连续的坐标对组成**；

面要素的“coordinates”必须是一个由线环（Linear Ring）坐标数组组成的数组。所谓**线环，是指首尾相连的封闭线，由至少 4 个点坐标对组成，且首尾的两个坐标对必须相同**。

包含洞的面，数组里面第一个线环元素必须是外环的，即外轮廓，坐标对按**逆时针方向连接**，其余的线环元素必须是内环的，即洞的轮廓，坐标对按**顺时针方向连接**。

多点（MultiPoint）、多线（MultiLineString）和多面（MultiPolygon）分别由多个点、线、面坐标对组成的数组构成。

#### 参考

[GeoJSON三分钟入门](https://zhuanlan.zhihu.com/p/539689986)

[WebGIS 标准数据格式 GeoJSON 格式介绍](https://zhuanlan.zhihu.com/p/560378257)

[webgis可视化里程碑](https://www.wanfengblog.com/archives/webgis-ke-shi-hua-li-cheng-bei)

### TopoJSON

### WKT

### CSV

### KML

### Shapefile

## 相关资源

* [Mapshaper 入门学习笔记](https://malagis.com/mapshaper-learning-note-summary.html)
* [Hands-On Data Visualization - Interactive Storytelling from Spreadsheets to Code](https://handsondataviz.org/)

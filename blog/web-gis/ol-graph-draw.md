# ol 之图形绘制

图形绘制：在地图上绘制点、线、面等图形，可以用来标记地图上的一些特殊位置，或者用来标记地图上的一些区域。

两种绘制方式：

1. 空间坐标未知，可使用鼠标绘制，即用户使用鼠标在地图上绘制图形，又叫交互式绘制

2. 空间坐标已知，使用代码添加制作好的图形

> 空间坐标是绘制的基础。

图形绘制在 GIS 应用中非常重要，可辅助其他功能实现，比如查询、编辑、分析等功能。

## 地图交互

地图交互(map interaction)是指用户与地图的交互，比如鼠标点击、鼠标移动、鼠标滚轮、键盘按键等。地图交互是地图应用的基础，地图交互可用于地图的基本操作，比如地图的平移、缩放、旋转等。地图交互也用于几何图形的绘制，比如地图的绘制、编辑、查询等。

ol 有两种交互方式：

- 默认交互

1. DragRotate：旋转
2. PinchRotate：双指旋转
3. DoubleClickZoom：双击缩放
4. MouseWheelZoom：鼠标滚轮缩放
5. PinchZoom：双指缩放
6. KeyboardZoom：键盘缩放
7. DragZoom：拖拽缩放
8. KeyboardPan：键盘（方向键）平移
9. DragPan：键盘（方向键）平移

- 矢量交互

1. Select：选择
2. Draw：绘制
3. Modify：编辑
4. Snap：捕捉

矢量交互和绘制几何图形有关，绘制几何图形时，需要先实例化绘制控件，然后将绘制控件添加到地图中，最后在地图上使用鼠标绘制图形。绘制完成后，可获取绘制的空间坐标，可用于其他功能。也可通过交互式编辑控件编辑已绘制的图形。

## 交互式绘制

原理：加载交互式控件到地图(实例化时设置绘制类型，如点、线、面)，用户使用鼠标在地图上绘制图形，绘制完成后，获取绘制的空间坐标，可用于其他功能。也可通过交互式编辑控件编辑已绘制的图形。绘制几何图形时，可设置图形的样式。

ol 中矢量地图为 ol.layer.Vector，矢量图层中的要素为 ol.Feature，要素的几何图形为 ol.geom.Geometry，几何图形的坐标为 ol.Coordinate。

交互式绘制控件为 ol.interaction.Draw，交互式编辑控件为 ol.interaction.Modify。在编辑时，需要先选中要编辑的要素，选择控件为 ol.interaction.Select。

### 绘制几何图形

几何图形包括点、线、面，以及圆、正方形等。

```js

```

### 编辑图形样式

集合图形都有对应的样式，比如线型、线颜色、线宽、线透明度和填充色等, 从`ol/style`中导入样式类，设置样式。

```js
import {
  Circle,
  Fill,
  Icon,
  IconImage,
  Image,
  RegularShape,
  /**
   * 边界线
   */
  Stroke,
  /**
   * 设置集合图形的样式
   */
  Style,
  /**
   * 设置文本样式
   */
  Text,
} from 'ol/style'
```

不设置样式，会启用默认样式。

```js

```

## 修改已绘制的图形

修改图形的集合信息一般通过交互方式实现，通过交互式编辑控件 ol.interaction.Modify 和要素选择控件 ol.interaction.Select 一起使用实现。

```js

```
